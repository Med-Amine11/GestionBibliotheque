@page
@model GestionBibliotheque.Pages.Admin.AuteursModel
@{
}
<h2 class="text-center mb-4">Liste des auteurs</h2>
<div class="mt-3">
    <a asp-page="AjouterAuteur" class="btn btn-success">
        Ajouter un nouveau auteur
    </a>
</div>
<br />
@if (!String.IsNullOrEmpty(Model.MessageErr))
{
    <div class="alert alert-danger"style="text-align : center">
        @Model.MessageErr
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}
<br />
<div class="container">
    <div class="row g-4">
        @if (Model.Auteurs.Count() > 0)
        {
            @foreach (var auteur in Model.Auteurs)
            {
                <div class="col-md-4 mb-4">
                    <div class="card h-100 shadow">

                        <!-- ID auteur (hidden) -->
                        <input type="hidden" value="@auteur.Id_auteur" />

                        <!-- Photo -->
                        <img src="~/images/auteurs/@auteur.Photo"
                             class="card-img-top"
                             alt="Photo de @auteur.Nom"
                             style="height: 250px;" />

                        <div class="card-body">
                            <h5 class="card-title">
                                @auteur.Prenom @auteur.Nom
                            </h5>

                            <p class="card-text">
                                <strong>Nationalité :</strong> @auteur.Nationalite <br />
                                <strong>Date de naissance :</strong>
                                @auteur.DateNaissance.ToString("dd/MM/yyyy") <br />

                                <strong>Date de décès :</strong>
                                @(auteur.DateDeces.HasValue
                                    ? auteur.DateDeces.Value.ToString("dd/MM/yyyy")
                                    : "—")
                            </p>

                            <p class="card-text text-muted" style="font-size: 0.9rem;">
                                @auteur.Biographie
                            </p>
                        </div>
                        <!-- Actions -->
                        <div class="card-footer text-center bg-white">
                            <a asp-page = "ModifierAuteur" asp-route-id ="@auteur.Id_auteur" class="btn btn-warning btn-sm me-1"  >
                                Modifier
                            </a>
                            <a asp-page-handler="Delete"  asp-route-id ="@auteur.Id_auteur" class="btn btn-danger btn-sm">
                                Supprimer
                            </a>
                        </div>
                    </div>
                </div>
            }
        }
        else
        {
            <p class="text-center">Aucun auterur trouvé </p>
        }

    </div>
</div>